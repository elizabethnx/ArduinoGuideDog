#include <Servo.h>                           // Include servo library



Servo servoLeft;                             // Declare left servo signal
Servo servoRight;                            // Declare right servo signal
int leftWhisker =6;
int rightWhisker =10; 

void setup() {
  
  Serial.begin(9600);
  pinMode(leftWhisker, INPUT);
  pinMode(rightWhisker, INPUT);
  servoLeft.attach(13);                      // Attach left signal to pin 13
  servoRight.attach(12);                     // Attach right signal to pin 12
}


void touch (){
  servoLeft.writeMicroseconds(1500);
  servoRight.writeMicroseconds(1500);
  delay(500);
  servoRight.writeMicroseconds(1500);
  servoLeft.writeMicroseconds(1500);
  delay(500);
}

void turn_left (){
  servoLeft.writeMicroseconds(255);
  servoRight.writeMicroseconds(255);
}

void back(){
  servoLeft.writeMicroseconds(1300);
  servoRight.writeMicroseconds(1700);
}

void turn_right(){
  servoLeft.writeMicroseconds(1460);
  servoRight.writeMicroseconds(1540);
}

void loop() {
  int leftValue = digitalRead(leftWhisker);
  int rightValue = digitalRead(rightWhisker);
  servoLeft.writeMicroseconds(1700);
  servoRight.writeMicroseconds(1300);
  if (leftValue == 0 || rightValue == 0){
    touch();
    
    if(leftValue == 0 && rightValue== 1)
    delay(500);
    back();
    delay(500);
    turn_left();
    delay(500);

  }
    else if (rightValue == 0 && leftValue == 1){
    delay(500);
    back();
    delay(500);
    turn_right();
    delay(500);
  }
  if(leftValue == 1){
    Serial.println("touched left whisker");
    servoLeft.writeMicroseconds(1700);
    servoRight.writeMicroseconds(1700);
    //turnLeft();
  }else if(rightValue == 1){
    servoLeft.writeMicroseconds(1700);
    servoRight.writeMicroseconds(1700);
    //turnLeft();
  }else{
    Serial.println("didn't touch whisker");
  }
  
   


  }

//  if(leftValue == 1){
//    Serial.println("touched left whisker");
//    servoLeft.writeMicroseconds(1700);
//    servoRight.writeMicroseconds(1700);
//    //turnLeft();
//  }else if(rightValue == 0){
//    servoLeft.writeMicroseconds(1700);
//    servoRight.writeMicroseconds(1700);
//    //turnLeft();
//  }else{
//    Serial.println("didn't touch whisker");
//  }

int pirState = LOW;             // we start, assuming no motion detected
int inputPin = 2;
int val = 0;                    // variable for reading the pin status
  
  

void PIRS (){
  val = digitalRead(inputPin);  // read input value
  if (val == HIGH) {            // check if the input is HIGH
    digitalWrite(ledPin, HIGH);  // turn LED ON
    if (pirState == LOW) {
      // we have just turned on
      Serial.println("Motion detected!");
      // We only want to print on the output change, not state
      pirState = HIGH;
    }
  } else {
    digitalWrite(ledPin, LOW); // turn LED OFF
    if (pirState == HIGH){
      // we have just turned of
      Serial.println("Motion ended!");
      // We only want to print on the output change, not state
      pirState = LOW;
    }
  }
}



